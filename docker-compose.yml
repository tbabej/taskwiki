version: '3'
services:
  tests:
    build: .
    volumes:
      - ".:/root/.vim/bundle/taskwiki:ro"
    network_mode: "host"
    security_opt:
      - label=type:container_runtime_t
    tty: true
    command: make xvfb-pytest
    environment:
      PYTEST_FLAGS: "-o cache_dir=/tmp/pytest-cache ${PYTEST_FLAGS:-}"
